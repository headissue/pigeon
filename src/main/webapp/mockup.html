<!DOCTYPE HTML>
<!--
  ~ Copyright (C) 2013 headissue GmbH (www.headissue.com)
  ~
  ~ Source repository: https://github.com/headissue/pigeon
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This patch is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this patch.  If not, see <http://www.gnu.org/licenses/agpl.txt/>.
  -->
<html>
<head>
    <title>Test Display Feedback</title>
    <meta charset="UTF-8" />
    <script type="text/javascript" src="./js/zepto.min.js"></script>
    <style>
        /* mockup template style */
        html {margin:0;}
        body {
            margin:0 auto;
            background: #fff; width: 930px; padding: 15px; font-family: sans-serif;
        }
        h1 {margin:0 0 20px 0;}
        #dummyheader {
            position: relative;
            padding-bottom: 50px;
            border-bottom: 6px solid #CCC;
        }
        #dummyheader:after {
            position: absolute;
            bottom: 0;
            content: '';
            width: 120px;
            height: 48px;
            background: #CCC;
        }
        #change-survey-form {
            position: absolute;
            right: 5px;
            bottom: 5px;
        }
        .dummycontent {
            margin-left: 385px;
        }
        #sidebar-feedback {
            float: left;
            position: absolute;
        }
        #sidebar-feedback h2 {
            position: relative;
            left: -10px;
            background: #7f9db9;
            height: 30px;
            width: 378px;
            margin: 0;
            font-size: 15px;
            line-height: 30px;
            -moz-box-shadow: 0px 1px 4px rgba(0,0,0,0.55);
            -khtml-box-shadow: 0px 1px 4px rgba(0,0,0,0.55);
            -webkit-box-shadow: 0px 1px 4px rgba(0,0,0,0.55);
            z-index: 100;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            text-align: center;
        }
        #sidebar-feedback h2:before,
        #sidebar-feedback h2:after {
            content: '';
            position: absolute;
            border-style: solid;
            height: 0;
            width: 0;
            top: 30px;
            z-index: -1;
            line-height: 0px;
            font-size: 0;
        }
        #sidebar-feedback h2:before {
            border-color: transparent #7d90a3 transparent transparent;
            border-style: solid;
            border-width: 0 10px 10px 0;
            left: 0px;
        }
        #sidebar-feedback h2:after {
            border-color: transparent transparent transparent #7d90a3;
            border-style: solid;
            border-width: 0 0 10px 10px;
            right: 0px;
        }
        #feedback-demo {
            border: 1px solid #e5e5e5;
            border-top: 0;
            margin: 0;
            background-color: #fff;
            padding: 15px 8px 8px 8px;
            width: 340px;
            min-height: 125px;
        }
    </style>
</head>
<body>
<div id="dummyheader">
    <h1>Mockup</h1>
    <form id="change-survey-form">
        <label>Survey Id:
            <input id="survey" size="10" />
            <button type="submit">change</button>
        </label>
    </form>
</div>

<div class="dummycontent">
    <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>
</div>

<div id="sidebar-feedback">
    <h2>Your Feedback</h2>
    <div id="feedback-demo" class="pigeon" data-pigeon-surveyid="1" data-pigeon-pagekey="mockup-page">
    </div>
</div>
<script>
  (function (c, w) {
    if (document.readyState === "complete")
      return c();
    if (w.attachEvent)
      w.attachEvent('onload', c);
    else
      w.addEventListener('load', c, false);
  })((function (){
    var d = document, t = 'script', s = d.createElement(t), b = d.getElementsByTagName(t)[0];
    s.async = true;
    s.src = 'js/pigeon.js';
    b.parentNode.insertBefore(s, b);
  }), window);
</script>

<div class="dummycontent">
    <p>Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
    <p>Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. </p>
    <p>Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.</p>
    <p>Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. </p>
</div>


<script>
    $('#change-survey-form').submit(function(ev) {
        ev.preventDefault();
        var surveyEl = document.getElementById('feedback-demo'),
            newId = $('#change-survey-form input').val();
        if (isNaN(newId)) return false;
        newId = parseInt(newId);
        // change survey element
        surveyEl.setAttribute("data-pigeon-surveyid", newId);
        Pigeon.embedSurvey(newId, surveyEl);
    });
</script>
</body>
</html>